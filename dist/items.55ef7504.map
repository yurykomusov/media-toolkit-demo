{"version":3,"sources":["js/utils.js","js/ItemsDataProvider.js","js/SingleFilterModule.js","js/items.js"],"names":["groupBy","arr","groupFunc","reduce","previous","current","index","array","k","push","chunk","chunkSize","all","chunkIndex","Math","floor","ItemsDataProvider","jsonData","_defaultGrouping","_data","_filterConfig","filterValue","item","discipline_id","toUpperCase","ageRange","themes","_filtersToApply","_groupingToApply","data","_expandBy","filterName","filterFunc","Error","groupingFunc","_","sorted","slice","sort","item1","item2","date","localeCompare","popular","needExpand","expandedByThemeFunc","prev","next","map","t","grouped","aggregatedFilter","accumulator","singleFilter","filter","Object","entries","key","items","length","SingleFilterModule","element","$element","_selectedValue","$selected","_onChange","addEventListener","event","target","tagName","from","to","classList","remove","dataset","add","value","$target","Array","querySelectorAll","find","$el","compareWithWhiteSpaceIgnore","toggle","selectedValue","str1","str2","replace","ItemsModule","_showFilter","_isDataLoaded","$filterBox","document","querySelector","$trigger","$filterDisciplines","$filterAgeGroups","$filterThemes","$filterGroupBy","$searchResults","showFilter","disciplineFilter","ageGroupFilter","themeFilter","groupByFilter","onChange","onFilterChange","_selectedFilters","_groupBy","filters","$container","innerHTML","text","concat","title","description","$pad","createElement","appendChild","$title","innerText","forEach","$row","window","location","bindItem","discipline","itemsGrouped","keys","groupName","bindItemsSection","getGroupTitleByKey","_allDisciplines","i","_allThemes","_allAgeGroups","_items","bindFilter","name","console","log","itemsDataProvider","applyFilter","applyGroupingAndSort","executeQuery","bindItems","searchParams","URLSearchParams","search","ъ","has","get","setAttribute","itemsController","fetch","then","response","json","onDataLoaded","onUrlChange"],"mappings":"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","file":"items.55ef7504.map","sourceRoot":"..","sourcesContent":["const groupBy = (arr, groupFunc) => arr.reduce((previous, current, index, array, k = groupFunc(current)) => ((previous[k] || (previous[k] = [])).push(current), previous), {});\r\n\r\nconst chunk = (arr, chunkSize) =>\r\n    arr.reduce((all, current, index) => {\r\n        const chunkIndex = Math.floor(index / chunkSize);\r\n\r\n        if (!all[chunkIndex]) {\r\n            all[chunkIndex] = []\r\n        }\r\n\r\n        all[chunkIndex].push(current);\r\n        return all;\r\n    }, []);\r\n\r\n\r\n\r\nexport { groupBy, chunk };","import * as _ from './utils.js';\r\n\r\nexport default class ItemsDataProvider {\r\n    constructor(jsonData) {\r\n        this._defaultGrouping = 'by discipline';\r\n        this._data = jsonData;\r\n        this._filterConfig = {\r\n            \"discipline\": (filterValue) => (item) => item.discipline_id.toUpperCase() == filterValue.toUpperCase(),\r\n            \"ageGroup\": (filterValue) => (item) => item.ageRange.toUpperCase() == filterValue.toUpperCase(),\r\n            \"theme\": (filterValue) => (item) => item.themes.toUpperCase() == filterValue.toUpperCase()\r\n        }\r\n        this._filtersToApply = [];\r\n        this._groupingToApply = (data) => ({ \"\": data });\r\n        this._expandBy = [];\r\n    }\r\n\r\n    applyFilter(filterName, filterValue) {\r\n        if (!filterValue || filterValue == '')\r\n            return this;\r\n\r\n        let filterFunc = this._filterConfig[filterName];\r\n\r\n        if (!filterFunc)\r\n            throw Error(`Could not find appropriate filter for ${filterName}`);\r\n\r\n        this._filtersToApply.push(filterFunc(filterValue));\r\n\r\n        return this;\r\n    }\r\n\r\n    applyGroupingAndSort(groupBy) {\r\n        let groupingFunc = (data) => data;\r\n\r\n        if (groupBy == 'by discipline') {\r\n            groupingFunc = (data) => _.groupBy(data, item => item.discipline_id);\r\n        }\r\n\r\n        if (groupBy == 'by age') {\r\n            groupingFunc = (data) => _.groupBy(data, item => item.ageRange);\r\n        }\r\n\r\n        if (groupBy == 'by theme') {\r\n            groupingFunc = (data) => _.groupBy(data, item => item.themes);\r\n        }\r\n\r\n        if (groupBy == 'newest') {\r\n            groupingFunc = (data) => {\r\n                let sorted = data.slice().sort((item1, item2) => item1.date.localeCompare(item2.date));\r\n\r\n                return _.groupBy(sorted, () => 'From Newest To Oldest');\r\n            }\r\n        }\r\n\r\n        if (groupBy == 'oldest') {\r\n            groupingFunc = (data) => {\r\n                let sorted = data.slice().sort((item1, item2) => item2.date.localeCompare(item1.date));\r\n                return _.groupBy(sorted, () => 'From Oldest To Newest');\r\n            }\r\n        }\r\n\r\n        if (groupBy == 'popular') {\r\n            groupingFunc = (data) => {\r\n                let sorted = data.slice().sort((item1, item2) => (item1.popular || false) - (item2.popular || false));\r\n                return _.groupBy(sorted, () => 'From Oldest To Newest');\r\n            }\r\n        }\r\n\r\n        let needExpand = groupBy == 'by theme';\r\n        // this transformation allow to filter by array-properties like theme\r\n        let expandedByThemeFunc = needExpand\r\n            ? (data) => data.reduce((prev, next) => [...prev, ...next.themes.map(t => ({...next, themes: t }))], [])\r\n            : (data) => data;\r\n\r\n        this._groupingToApply = (data) => groupingFunc(expandedByThemeFunc(data)); // I am doing something crazy!\r\n\r\n        return this;\r\n    }\r\n\r\n    executeQuery() {\r\n        // group by \r\n        // apply filters\r\n        // remove empty sections\r\n\r\n        let grouped = this._groupingToApply(this._data);\r\n        let aggregatedFilter = (data) => this._filtersToApply.reduce((accumulator, singleFilter) => accumulator.filter(singleFilter), data);\r\n\r\n        return Object.entries(grouped)\r\n            .map(([key, items]) => ([key, aggregatedFilter(items)]))\r\n            .filter(([key, items]) => items.length > 0) // show only sections with elements\r\n            .reduce((accumulator, [key, items]) => ({...accumulator, [key]: items }), {})\r\n    }\r\n\r\n}","export class SingleFilterModule {\r\n    constructor(element) {          \r\n        this.$element = element;\r\n        this._selectedValue = null;\r\n        this.$selected = null;\r\n        this._onChange = null;\r\n        this.$element.addEventListener('click', (event) => {\r\n            if (event.target.tagName !== 'A')\r\n                return;\r\n\r\n            let from = null;\r\n            let to = null;\r\n            \r\n            if (this.$selected && this.$selected !== null) {\r\n                this.$selected.classList.remove('selected');\r\n                from = this.$selected.dataset.key;\r\n            }\r\n            \r\n            if (this.$selected !== event.target) {               \r\n                this.$selected = event.target;\r\n                this.$selected.classList.add('selected');\r\n                to = this.$selected.dataset.key;\r\n            } else {\r\n                this.$selected == null;\r\n            }\r\n                        \r\n            if (this._onChange !== null)\r\n                this._onChange(from, to);\r\n        });\r\n    }\r\n\r\n    set onChange(value) {\r\n        this._onChange = value;\r\n    }\r\n    \r\n    get selectedValue() {\r\n        if (this.$selected)\r\n            return this.$selected.dataset.key;\r\n        else return null;\r\n    }\r\n\r\n    set selectedValue(value) {\r\n        if (this.$selected)\r\n            this.$selected.classList.remove('selected');\r\n\r\n        let $target = Array.from(this.$element.querySelectorAll('a')).find(($el) => SingleFilterModule.compareWithWhiteSpaceIgnore($el.dataset.key, value));\r\n\r\n        if ($target !== this.$selected && $target) {                        \r\n            this.$selected = $target;\r\n            \r\n            if (this.$selected !== null)\r\n                this.$selected.classList.toggle('selected');\r\n\r\n            if (this._onChange !== null)\r\n                this._onChange(this.selectedValue, value);\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n\r\n    static get compareWithWhiteSpaceIgnore() {\r\n        return (str1, str2) => str1.toUpperCase().replace(' ', '') === str2.toUpperCase().replace(' ', '')\r\n    }\r\n}\r\n","import * as _ from './utils.js';\r\nimport ItemsDataProvider from './ItemsDataProvider.js';\r\nimport { SingleFilterModule } from './SingleFilterModule.js';\r\n\r\nclass ItemsModule {\r\n    constructor() {\r\n        this._showFilter = false;\r\n        this._data = [];\r\n        this._isDataLoaded = false;\r\n\r\n        this.$filterBox = document.querySelector('#filter-box');\r\n        this.$trigger = document.querySelector('#filter-toggle');\r\n        \r\n        this.$filterDisciplines = document.querySelector('#disciplines');        \r\n        this.$filterAgeGroups = document.querySelector('#age-groups');\r\n        this.$filterThemes = document.querySelector('#themes');\r\n        this.$filterGroupBy = document.querySelector('#group-by');\r\n        this.$searchResults = document.querySelector('#items-search-results');\r\n\r\n        this.$trigger.addEventListener('click', () => this.showFilter = !this.showFilter);\r\n\r\n        let disciplineFilter = new SingleFilterModule(this.$filterDisciplines);\r\n        let ageGroupFilter = new SingleFilterModule(this.$filterAgeGroups);\r\n        let themeFilter = new SingleFilterModule(this.$filterThemes);\r\n        let groupByFilter = new SingleFilterModule(this.$filterGroupBy);\r\n\r\n       \r\n        disciplineFilter.onChange = (from, to) => this.onFilterChange('discipline', to);\r\n        themeFilter.onChange = (from, to) => this.onFilterChange('theme', to);\r\n        ageGroupFilter.onChange = (from, to) => this.onFilterChange('ageGroup', to);\r\n        groupByFilter.onChange = (from, to) => this.onFilterChange('groupBy', to);\r\n\r\n        this._selectedFilters = {}; // { filterName, filterValue}\r\n        this._groupBy = null;\r\n\r\n        this.filters = {\r\n            'discipline': disciplineFilter,\r\n            'theme': themeFilter,\r\n            'ageGroup': ageGroupFilter,\r\n            'groupBy': groupByFilter\r\n        }\r\n    }\r\n\r\n    bindFilter($container, items) {\r\n        $container.innerHTML = items.map((item) => `<li><a data-key=\"${item.key}\">${item.text}</a></li>`)\r\n            .reduce((item1, item2) => item1.concat(item2));\r\n    }\r\n\r\n\r\n    bindItem($container, title, description) {\r\n            let $pad = document.createElement('custom-pad');\r\n            $pad.dataset.title = title;\r\n            $pad.dataset.description = description;\r\n            $pad.classList.add('three');\r\n            $pad.classList.add('columns');\r\n\r\n            $container.appendChild($pad);\r\n    }\r\n\r\n    bindItemsSection($container, items, title) {           \r\n        let $title = document.createElement('h4');\r\n        $title.classList.add('section-title');\r\n        $title.innerText = title;\r\n\r\n        $container.appendChild($title);\r\n\r\n        _.chunk(items, 4).forEach(chunk => {\r\n            let $row = document.createElement('div');\r\n\r\n            $row.addEventListener('click', () => window.location = 'details.html');\r\n            $row.classList.add('row');\r\n\r\n            chunk.forEach((item) => this.bindItem($row, item.discipline, item.title));\r\n            \r\n            $container.appendChild($row);\r\n        })\r\n    }\r\n    \r\n    bindItems($container, itemsGrouped) {\r\n        if (Object.keys(itemsGrouped).length == 0) {\r\n            this.$searchResults.innerHTML = 'Не знойдзена ніводнага практыкавання:( Паспрабуйце пашукаць па іншых крытэрыях'\r\n            return;    \r\n        }\r\n\r\n        this.$searchResults.innerHTML = '';\r\n\r\n        Object.keys(itemsGrouped).forEach(groupName => this.bindItemsSection($container, itemsGrouped[groupName], this.getGroupTitleByKey(groupName, this.filters['groupBy'].selectedValue)))\r\n    }\r\n\r\n    getGroupTitleByKey(key, groupBy) {\r\n        if (groupBy === 'newest') \r\n            return 'З ранніх';\r\n        if (groupBy === 'oldest') \r\n            return 'З апошніх';\r\n        if (groupBy === 'by discipline')\r\n            return this._allDisciplines.find(i => i.key === key).text\r\n        \r\n        if (groupBy === 'by theme')\r\n            return this._allThemes.find(i => i.key === key).text\r\n\r\n        if (groupBy === 'by age')\r\n            return this._allAgeGroups.find(i => i.key === key).text\r\n    }\r\n\r\n    get showFilter() {\r\n        return this._showFilter;        \r\n    }\r\n\r\n    set showFilter(value) {\r\n        if (this._showFilter === value) return;\r\n\r\n        this._showFilter = value;\r\n\r\n        if (value === false)\r\n            this.$filterBox.setAttribute('style', 'display: none');\r\n        else \r\n            this.$filterBox.setAttribute('style', 'display: block');\r\n    }\r\n\r\n    onDataLoaded(data) {\r\n        this._items = data['items'];\r\n        this._allDisciplines = data['all-disciplines'];\r\n        this._allAgeGroups = data['all-age-groups'];\r\n        this._allThemes = data['all-themes'];\r\n\r\n        this.bindFilter(this.$filterDisciplines, this._allDisciplines); \r\n        this.bindFilter(this.$filterAgeGroups, this._allAgeGroups); \r\n        this.bindFilter(this.$filterThemes, this._allThemes); \r\n        this.bindFilter(this.$filterGroupBy, \r\n            [\r\n                { key: \"newest\", text: \"Новыя\"},\r\n                { key: \"oldest\", text: \"Старыя\"},\r\n                { key: \"by discipline\", text: \"Па прадметах\"},\r\n                { key: \"by theme\", text: \"Па тэмах\"},\r\n                { key: \"by age\", text: \"Па мэтавай групе\"},\r\n            ]);\r\n\r\n        this._isDataLoaded = true;\r\n\r\n        // set default filter\r\n        this.filters['groupBy'].selectedValue = 'by discipline';\r\n\r\n        // set links\r\n\r\n    }\r\n\r\n    onFilterChange(name, value) {\r\n        console.log(`filter ${name} changed to ${value}`);\r\n\r\n        if (name == 'groupBy')\r\n            this._groupBy = value;\r\n        else\r\n            this._selectedFilters[name] = value;\r\n\r\n        let itemsDataProvider = new ItemsDataProvider(this._items)\r\n    \r\n        let items = Object.entries(this._selectedFilters) // applying filters\r\n            .reduce((accumulator, [filterName, filterValue]) => accumulator.applyFilter(filterName, filterValue), itemsDataProvider)\r\n            .applyGroupingAndSort(this._groupBy)\r\n            .executeQuery();\r\n\r\n        this.bindItems(this.$searchResults, items);        \r\n    }\r\n\r\n    onUrlChange(location) {\r\n        let searchParams = new URLSearchParams(location.search);\r\n        let $title = document.querySelector('#exercise-title');ъ\r\n\r\n        $title.innerHTML = $title.innerHTML + ' усе';\r\n        \r\n        if (searchParams.has('ageGroup')) {\r\n            this.filters['ageGroup'].selectedValue = searchParams.get('ageGroup');\r\n            this.filters['groupBy'].selectedValue = 'by discipline';\r\n\r\n            $title.innerHTML = $title.innerHTML + ' '\r\n        }\r\n            \r\n        if (searchParams.has('discipline')) {\r\n            this.filters['discipline'].selectedValue = searchParams.get('discipline');\r\n            this.filters['groupBy'].selectedValue = 'by age'\r\n        }\r\n\r\n        if (searchParams.has('theme')) {\r\n            this.filters['theme'].selectedValue = searchParams.get('theme');\r\n            this.filters['groupBy'].selectedValue = 'by discipline';\r\n        }\r\n    }\r\n}\r\n\r\nconst itemsController = new ItemsModule();\r\n\r\nfetch('data/exercises.json')\r\n    .then((response) => response.json())\r\n    .then((json) => itemsController.onDataLoaded(json));\r\n\r\nwindow.addEventListener('load', () => itemsController.onUrlChange(window.location))"]}